(function($){$.suggest=function(g,h){var j=$(g).attr("autocomplete","off");var k=$(document.createElement("ul"));var l=false;var m=0;var n=[];var o=0;k.addClass(h.resultsClass).appendTo('body');var p=function(){var a=j.offset();k.css({top:(a.top+g.offsetHeight)+'px',left:a.left+'px'})};var r=function(e){if((/27$|38$|40$/.test(e.keyCode)&&k.is(':visible'))||(/^13$|^9$/.test(e.keyCode)&&v())){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;e.returnValue=false;switch(e.keyCode){case 38:y();break;case 40:x();break;case 9:case 13:w();break;case 27:k.hide();break}}else if(j.val().length!=m){if(l){clearTimeout(l)}l=setTimeout(s,h.delay);m=j.val().length}};var s=function(){var q=$.trim(j.val());if(q.length>=h.minchars){var a=h.source(q);k.hide();t(a)}else{k.hide()}};var t=function(a){if(!a){return}if(!a.length){k.hide();return}var b='';for(var i=0;i<a.length;i++){b+='<li>'+a[i]+'</li>'}k.html(b).show();k.children('li').mouseover(function(){k.children('li').removeClass(h.selectClass);$(this).addClass(h.selectClass)}).click(function(e){e.preventDefault();e.stopPropagation();w()})};var u=function(a,q){var b=[];var c=a.split(h.delimiter);var d=new RegExp(q,'ig');var e='<span class="'+h.matchClass+'">'+q+'</span>';for(var i=0;i<c.length;i++){var f=$.trim(c[i]);if(f){f=f.replace(d,e);b[b.length]=f}}return b};var v=function(){if(!k.is(':visible')){return false}var a=k.children('li.'+h.selectClass);if(!a.length){a=false}return a};var w=function(){$currentResult=v();if($currentResult){j.val($currentResult.text());k.hide();if(h.onSelect){h.onSelect.apply(j[0])}}};var x=function(){$currentResult=v();if($currentResult){$currentResult.removeClass(h.selectClass).next().addClass(h.selectClass)}else{k.children('li:first-child').addClass(h.selectClass)}};var y=function(){$currentResult=v();if($currentResult){$currentResult.removeClass(h.selectClass).prev().addClass(h.selectClass)}else{k.children('li:last-child').addClass(h.selectClass)}};p();$(window).load(p).resize(p);j.blur(function(){setTimeout(function(){k.hide()},200)});try{k.bgiframe()}catch(e){}if($.browser.mozilla){j.keypress(r)}else{j.keydown(r)}};$.fn.suggest=function(a,b){if(!a){return}b=b||{};b.source=a;b.delay=b.delay||100;b.resultsClass=b.resultsClass||'ac_results';b.selectClass=b.selectClass||'ac_over';b.matchClass=b.matchClass||'ac_match';b.minchars=b.minchars||2;b.delimiter=b.delimiter||'\n';b.onSelect=b.onSelect||false;b.maxCacheSize=b.maxCacheSize||65536;this.each(function(){$.suggest(this,b)});return this}})(jQuery);